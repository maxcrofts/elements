{"version":3,"file":"index.js","sources":["../src/ClickableAreaElement.ts","../src/index.ts"],"sourcesContent":["export default class ClickableAreaElement extends HTMLElement {\n\t/**\n\t * @internal\n\t */\n\tprivate _implicitControl: HTMLElement | null = null;\n\n\t/**\n\t * @internal\n\t */\n\tprivate _htmlFor: string | undefined;\n\n\tstatic get observedAttributes(): string[] {\n\t\treturn [\"for\"];\n\t}\n\n\tget control(): HTMLElement | null {\n\t\treturn this._htmlFor != null\n\t\t\t? document.getElementById(this._htmlFor) ?? this._implicitControl\n\t\t\t: this._implicitControl;\n\t}\n\n\tget htmlFor(): string | undefined {\n\t\treturn this._htmlFor;\n\t}\n\n\tset htmlFor(value: any) {\n\t\tif (value != null) {\n\t\t\tthis.setAttribute(\"for\", value.toString());\n\t\t} else {\n\t\t\tthis.removeAttribute(\"for\");\n\t\t}\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.addEventListener(\n\t\t\t\"click\",\n\t\t\t(e) => {\n\t\t\t\tconst control = this.control;\n\n\t\t\t\t// Pass focus if current target is not a form control element\n\t\t\t\tconst tagName = (e.target as HTMLElement)?.tagName;\n\t\t\t\tif (\n\t\t\t\t\ttagName !== \"BUTTON\" &&\n\t\t\t\t\ttagName !== \"INPUT\" &&\n\t\t\t\t\ttagName !== \"SELECT\" &&\n\t\t\t\t\ttagName !== \"TEXTAREA\"\n\t\t\t\t) {\n\t\t\t\t\tcontrol?.focus();\n\t\t\t\t}\n\n\t\t\t\t// Forward click event if it is not for us\n\t\t\t\tif (e.target !== control) {\n\t\t\t\t\tconst newEvent = new PointerEvent(e.type, e);\n\t\t\t\t\tcontrol?.dispatchEvent(newEvent);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse,\n\t\t);\n\n\t\tconst observer = new MutationObserver(this._walk.bind(this));\n\t\tobserver.observe(this, {\n\t\t\tsubtree: true,\n\t\t\tchildList: true,\n\t\t});\n\t}\n\n\tconnectedCallback() {\n\t\tthis._walk();\n\t}\n\n\tdisconnnectedCallback() {\n\t\tthis._implicitControl = null;\n\t}\n\n\tattributeChangedCallback(\n\t\tname: string,\n\t\t_oldValue: string | undefined,\n\t\tnewValue: string | undefined,\n\t): void {\n\t\tif (name === \"for\") {\n\t\t\tthis._htmlFor = newValue;\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tprivate _walk(): void {\n\t\tconst treeWalker = document.createTreeWalker(\n\t\t\tthis,\n\t\t\tNodeFilter.SHOW_ELEMENT,\n\t\t\t{\n\t\t\t\tacceptNode: (node) => {\n\t\t\t\t\tswitch ((node as HTMLElement)?.tagName) {\n\t\t\t\t\t\tcase \"INPUT\":\n\t\t\t\t\t\t\treturn (node as HTMLInputElement).hidden\n\t\t\t\t\t\t\t\t? NodeFilter.FILTER_SKIP\n\t\t\t\t\t\t\t\t: NodeFilter.FILTER_ACCEPT;\n\t\t\t\t\t\tcase \"BUTTON\":\n\t\t\t\t\t\tcase \"METER\":\n\t\t\t\t\t\tcase \"OUTPUT\":\n\t\t\t\t\t\tcase \"PROGRESS\":\n\t\t\t\t\t\tcase \"SELECT\":\n\t\t\t\t\t\tcase \"TEXTAREA\":\n\t\t\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tthis._implicitControl = treeWalker.nextNode() as HTMLElement;\n\t}\n}\n","import ClickableAreaElement from \"./ClickableAreaElement\";\n\nexport default ClickableAreaElement;\n\ndeclare global {\n\tinterface Window {\n\t\tClickableAreaElement: typeof ClickableAreaElement;\n\t}\n\n\tinterface HTMLElementTagNameMap {\n\t\t\"clickable-area\": ClickableAreaElement;\n\t}\n}\n\nif (window.customElements.get(\"clickable-area\") === undefined) {\n\twindow.customElements.define(\"clickable-area\", ClickableAreaElement);\n\twindow.ClickableAreaElement = ClickableAreaElement;\n}\n"],"names":["ClickableAreaElement","_implicitControl","e","_a","control","tagName","newEvent","_walk","_htmlFor","value","name","_oldValue","newValue","treeWalker","node","__name"],"mappings":"iKAAqBA,MAAAA,UAA6B,WAAY,CAiC7D,aAAc,CACb,QA9BD,KAAQC,EAAuC,KAgC9C,KAAK,iBACJ,QACCC,GAAM,CAtCV,IAAAC,EAuCI,MAAMC,EAAU,KAAK,QAGfC,GAAWF,EAAAD,EAAE,SAAF,YAAAC,EAA0B,QAW3C,GATCE,IAAY,UACZA,IAAY,SACZA,IAAY,UACZA,IAAY,YAEZD,GAAS,MAINF,EAAAA,EAAE,SAAWE,EAAS,CACzB,MAAME,EAAW,IAAI,aAAaJ,EAAE,KAAMA,CAAC,EAC3CE,GAAS,cAAcE,CACxB,CAAA,CACD,EACA,EACD,EAEiB,IAAI,iBAAiB,KAAKC,EAAM,KAAK,IAAI,CAAC,EAClD,QAAQ,KAAM,CACtB,QAAS,GACT,UAAW,EACZ,CAAC,CACF,CAvDA,WAAW,oBAA+B,CACzC,MAAO,CAAC,KAAK,CACd,CAEA,IAAI,SAA8B,CAfnC,IAAAJ,EAgBE,OAAO,KAAKK,GAAY,MACrBL,EAAA,SAAS,eAAe,KAAKK,CAAQ,IAArC,KAAAL,EAA0C,KAAKF,EAC/C,KAAKA,CACT,CAEA,IAAI,SAA8B,CACjC,OAAO,KAAKO,CACb,CAEA,IAAI,QAAQC,EAAY,CACnBA,GAAS,KACZ,KAAK,aAAa,MAAOA,EAAM,SAAA,CAAU,EAEzC,KAAK,gBAAgB,KAAK,CAE5B,CAqCA,mBAAoB,CACnB,KAAKF,EACN,CAAA,CAEA,uBAAwB,CACvB,KAAKN,EAAmB,IACzB,CAEA,yBACCS,EACAC,EACAC,EACO,CACHF,IAAS,QACZ,KAAKF,EAAWI,EAElB,CAKQL,GAAc,CACrB,MAAMM,EAAa,SAAS,iBAC3B,KACA,WAAW,aACX,CACC,WAAaC,GAAS,CACrB,OAASA,GAAsB,SAC9B,IAAK,QACJ,OAAQA,EAA0B,OAC/B,WAAW,YACX,WAAW,cACf,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,WACL,IAAK,SACL,IAAK,WACJ,OAAO,WAAW,cACnB,QACC,OAAO,WAAW,WACpB,CACD,CACD,CACD,EAEA,KAAKb,EAAmBY,EAAW,UACpC,CACD,CApHqBb,EAAAA,EAAAA,KAAAe,EAAAf,EAAA,sBAAA,ECcjB,OAAO,eAAe,IAAI,gBAAgB,IAAM,SACnD,OAAO,eAAe,OAAO,iBAAkBA,CAAoB,EACnE,OAAO,qBAAuBA"}
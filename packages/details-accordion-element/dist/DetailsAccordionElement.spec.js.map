{"version":3,"file":"DetailsAccordionElement.spec.js","sources":["../src/DetailsAccordionElement.spec.ts"],"sourcesContent":["/// <reference types=\"@types/chai\" />\n/// <reference types=\"@types/mocha\" />\n\nimport type DetailsAccordionElement from \"./DetailsAccordionElement\";\n\ndeclare const assert: Chai.AssertStatic;\n\ndescribe(\"details-accordion\", () => {\n\tlet detailsAccordionElement: DetailsAccordionElement;\n\tlet detailsElements: HTMLDetailsElement[];\n\tlet summaryElements: HTMLElement[];\n\n\tbeforeEach(async () => {\n\t\tdetailsAccordionElement = document.createElement(\n\t\t\t\"details-accordion\"\n\t\t) as DetailsAccordionElement;\n\t\tdocument.body.appendChild(detailsAccordionElement);\n\n\t\tdetailsAccordionElement.innerHTML = `\n\t\t\t<details>\n\t\t\t\t<summary>\n\t\t\t\t\tABC\n\t\t\t\t</summary>\n\t\t\t\t123\n\t\t\t</details>\n\t\t\t<details>\n\t\t\t\t<summary>\n\t\t\t\t\tDEF\n\t\t\t\t</summary>\n\t\t\t\t456\n\t\t\t</details>\n\t\t`;\n\n\t\tdetailsElements = Array.from(\n\t\t\tdetailsAccordionElement.querySelectorAll(\"details\")\n\t\t);\n\t\tassert.equal(detailsElements.length, 2);\n\n\t\tsummaryElements = Array.from(\n\t\t\tdetailsAccordionElement.querySelectorAll(\"summary\")\n\t\t);\n\t\tassert.equal(summaryElements.length, 2);\n\t});\n\n\tafterEach(async () => {\n\t\t// Clean up\n\t\tdetailsAccordionElement.remove();\n\t});\n\n\tit(\"applies `open` attribute immediately on opening\", () => {\n\t\tdetailsAccordionElement.animationDuration = 5;\n\t\tsummaryElements[0].click();\n\t\tassert.isTrue(detailsElements[0].hasAttribute(\"open\"));\n\t});\n\n\tit(\"applies `data-details-accordion-open` attribute immediately on opening\", () => {\n\t\tdetailsAccordionElement.animationDuration = 5;\n\t\tsummaryElements[0].click();\n\t\tassert.isTrue(\n\t\t\tdetailsElements[0].hasAttribute(\"data-details-accordion-open\")\n\t\t);\n\t});\n\n\tit(\"applies `data-details-accordion-animating` attribute immediately on opening\", () => {\n\t\tdetailsAccordionElement.animationDuration = 5;\n\t\tsummaryElements[0].click();\n\t\tassert.isTrue(\n\t\t\tdetailsElements[0].hasAttribute(\"data-details-accordion-animating\")\n\t\t);\n\t});\n\n\tit(\"removes `open` attribute once fully closed\", async () => {\n\t\t// Open\n\t\tsummaryElements[0].click();\n\t\t// Set animation duration to 2ms\n\t\tdetailsAccordionElement.animationDuration = 2;\n\t\t// Close\n\t\tsummaryElements[0].click();\n\t\t// Details element should still have `open` attribute\n\t\tassert.isTrue(detailsElements[0].hasAttribute(\"open\"));\n\t\t// Wait for animation to complete\n\t\tawait detailsAccordionElement.animationFinished;\n\t\t// Details element should no longer have `open` attribute\n\t\tassert.isFalse(detailsElements[0].hasAttribute(\"open\"));\n\t});\n\n\tit(\"removes `data-details-accordion-open` attribute immediately on closing\", () => {\n\t\t// Open\n\t\tsummaryElements[0].click();\n\t\t// Set animation duration to 5ms\n\t\tdetailsAccordionElement.animationDuration = 5;\n\t\t// Close\n\t\tsummaryElements[0].click();\n\t\t// Details element should no longer have `data-details-accordion-open` attribute\n\t\tassert.isFalse(\n\t\t\tdetailsElements[0].hasAttribute(\"data-details-accordion-open\")\n\t\t);\n\t});\n\n\tit(\"removes `data-details-accordion-animating` attribute once fully closed\", async () => {\n\t\t// Open\n\t\tsummaryElements[0].click();\n\t\t// Set animation duration to 2ms\n\t\tdetailsAccordionElement.animationDuration = 2;\n\t\t// Close\n\t\tsummaryElements[0].click();\n\t\t// Details element should still have `data-details-accordion-animating` attribute\n\t\tassert.isTrue(\n\t\t\tdetailsElements[0].hasAttribute(\"data-details-accordion-animating\")\n\t\t);\n\t\t// Wait for animation to complete\n\t\tawait detailsAccordionElement.animationFinished;\n\t\t// Details element should no longer have `data-details-accordion-animating` attribute\n\t\tassert.isFalse(\n\t\t\tdetailsElements[0].hasAttribute(\"data-details-accordion-animating\")\n\t\t);\n\t});\n\n\tit(\"sets `animationDuration` property based on `animation-duration` attribute\", () => {\n\t\tconst animationDuration = 42;\n\t\tdetailsAccordionElement.setAttribute(\n\t\t\t\"animation-duration\",\n\t\t\tanimationDuration.toString()\n\t\t);\n\t\tassert.equal(\n\t\t\tdetailsAccordionElement.animationDuration,\n\t\t\tanimationDuration\n\t\t);\n\t});\n\n\tit(\"sets `animation-duration` attribute based on `animationDuration` property\", () => {\n\t\tconst animationDuration = 42;\n\t\tdetailsAccordionElement.animationDuration = animationDuration;\n\t\tassert.equal(\n\t\t\tdetailsAccordionElement.getAttribute(\"animation-duration\"),\n\t\t\tanimationDuration.toString()\n\t\t);\n\t});\n});\n"],"names":["detailsAccordionElement","detailsElements","summaryElements"],"mappings":"AAOA,SAAS,oBAAqB,IAAM,CACnC,IAAIA,EACAC,EACAC,EAEJ,WAAW,SAAY,CACtBF,EAA0B,SAAS,cAClC,mBACD,EACA,SAAS,KAAK,YAAYA,CAAuB,EAEjDA,EAAwB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAepCC,EAAkB,MAAM,KACvBD,EAAwB,iBAAiB,SAAS,CACnD,EACA,OAAO,MAAMC,EAAgB,OAAQ,CAAC,EAEtCC,EAAkB,MAAM,KACvBF,EAAwB,iBAAiB,SAAS,CACnD,EACA,OAAO,MAAME,EAAgB,OAAQ,CAAC,CACvC,CAAC,EAED,UAAU,SAAY,CAErBF,EAAwB,OACzB,CAAA,CAAC,EAED,GAAG,kDAAmD,IAAM,CAC3DA,EAAwB,kBAAoB,EAC5CE,EAAgB,GAAG,MACnB,EAAA,OAAO,OAAOD,EAAgB,GAAG,aAAa,MAAM,CAAC,CACtD,CAAC,EAED,GAAG,yEAA0E,IAAM,CAClFD,EAAwB,kBAAoB,EAC5CE,EAAgB,GAAG,MAAA,EACnB,OAAO,OACND,EAAgB,GAAG,aAAa,6BAA6B,CAC9D,CACD,CAAC,EAED,GAAG,8EAA+E,IAAM,CACvFD,EAAwB,kBAAoB,EAC5CE,EAAgB,GAAG,QACnB,OAAO,OACND,EAAgB,GAAG,aAAa,kCAAkC,CACnE,CACD,CAAC,EAED,GAAG,6CAA8C,SAAY,CAE5DC,EAAgB,GAAG,MAAA,EAEnBF,EAAwB,kBAAoB,EAE5CE,EAAgB,GAAG,MAAM,EAEzB,OAAO,OAAOD,EAAgB,GAAG,aAAa,MAAM,CAAC,EAErD,MAAMD,EAAwB,kBAE9B,OAAO,QAAQC,EAAgB,GAAG,aAAa,MAAM,CAAC,CACvD,CAAC,EAED,GAAG,yEAA0E,IAAM,CAElFC,EAAgB,GAAG,MAAA,EAEnBF,EAAwB,kBAAoB,EAE5CE,EAAgB,GAAG,MAEnB,EAAA,OAAO,QACND,EAAgB,GAAG,aAAa,6BAA6B,CAC9D,CACD,CAAC,EAED,GAAG,yEAA0E,SAAY,CAExFC,EAAgB,GAAG,MAAM,EAEzBF,EAAwB,kBAAoB,EAE5CE,EAAgB,GAAG,MAAA,EAEnB,OAAO,OACND,EAAgB,GAAG,aAAa,kCAAkC,CACnE,EAEA,MAAMD,EAAwB,kBAE9B,OAAO,QACNC,EAAgB,GAAG,aAAa,kCAAkC,CACnE,CACD,CAAC,EAED,GAAG,4EAA6E,IAAM,CAErFD,EAAwB,aACvB,qBACA,IAAkB,SACnB,CAAA,EACA,OAAO,MACNA,EAAwB,kBACxB,EACD,CACD,CAAC,EAED,GAAG,4EAA6E,IAAM,CAErFA,EAAwB,kBAAoB,GAC5C,OAAO,MACNA,EAAwB,aAAa,oBAAoB,EACzD,IAAkB,UACnB,CACD,CAAC,CACF,CAAC"}